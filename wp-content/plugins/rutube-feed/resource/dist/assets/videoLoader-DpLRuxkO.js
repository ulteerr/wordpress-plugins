function f(t,n,e,o,d,c,l,a){if(c.innerHTML="",n&&e){const r=document.createElement("button");r.textContent="Показать ещё",r.classList.add("next-page"),r.addEventListener("click",s=>{s.preventDefault(),y(o+1,t,d,c,l,a,!0)}),c.appendChild(r)}}function h(t){u(t),t.src="https://via.placeholder.com/320x180?text=No+Image"}function u(t){p(t,!0);const n=t.previousElementSibling;n instanceof HTMLElement&&p(n,!1);const e=t.closest(".video-thumbnail"),o=e==null?void 0:e.querySelector(".play-button");o instanceof HTMLElement&&p(o,!0)}function p(t,n,e="block"){t&&(t.style.display=n?e:"none")}async function y(t,n,e,o,d,c,l=!1){if(!e||!o)return;const a=new FormData;a.append("action","load_admin_videos"),a.append("post_id",n.post_id),a.append("channel",d||""),a.append("limit",c||""),a.append("page",t.toString());try{const s=await(await fetch(n.ajax_url,{method:"POST",body:a})).json();s.success&&(e.innerHTML=l?e.innerHTML+s.data.html:s.data.html,document.querySelectorAll(".lazy-thumbnail").forEach(i=>{i.addEventListener("load",()=>u(i)),i.addEventListener("error",()=>h(i))}),f(n,s.data.has_more,s.data.count,t,e,o,d,c))}catch(r){console.error("Ошибка загрузки видео:",r)}}export{y as l,p as t};
